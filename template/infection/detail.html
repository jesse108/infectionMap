{include file="header.html"}
<link rel="stylesheet" href="/static/css/infectious.css">
<div class="wrap">
	<div class="content">
		<div class="l-content">
			<div id="mapContainer"></div><!-- 地图容器 -->
			<div class="quickT">
					<select name="continent_id" id="intercontinental" onchange="changeLocation(1);">
						<option value="0">选择大洲</option>
					{foreach $locations as $location}
						<option value="{$location['id']}">{$location['cname']}</option>
					{/foreach}
					</select>
					
					<select id="country_id" class="form-control" onchange="changeLocation(2);">
						<option value="0">选择国家</option>
					</select>
					
					<select id="city_id" class="form-control" onchange="changeLocation(3);">
						<option value="0">选择城市</option>
					</select>

					<a href="/infection/case_update.php?infection_id={$infection['id']}"><button class="btn">新增发病记录</button></a>
			</div>
			
			<div class="itable">
				<table>
					<thead>
						<tr>
							<td width="15%">国家地区</td>
							<td width="15%">发病日期</td>
							<td width="15%">发病人数</td>
							<td width="15%">发病率</td>
							<td width="15%">患病人数</td>
							<td width="15%">患病率</td>
							<td width="25%">备注</td>
						</tr>
					</thead>
					<tbody>
					{foreach $infectionCases as $case}
						<tr>
							<td>{$case['location']}</td>
							<td>{$case['start_date']}</td>
							<td>{$case['case_number']}</td>
							<td>{$case['case_rate']}</td>
							<td>{$case['ill_number']}</td>
							<td>{$case['ill_rate']}</td>
							<td>{$case['comment']}</td>
						</tr>				
					{/foreach}

					</tbody>
				</table>
			</div>

		</div>
		<div class="r-content">
			<h3>东方马脑炎</h3>
			<div class="b base">
				<div class="t">
					基本信息 <a class="edit" target="_blank" href="/infection/update.php?id={$infection['id']}#infection_form">编辑</a>
				</div>
				<div class="c">
					<p>
						<label>疾病名称：</label><span class="va">{$infection['cname']}</span>
					</p>
					<p>
						<label>疾病英文：</label><span class="va">{$infection['ename']}</span>
					</p>
					<br>
					<p>
						<label>病原体名称：</label><span class="va">{$infection['pathogen_cname']}</span>
					</p>
					<p>
						<label>病原体英文：</label><span class="va">{$infection['pathogen_ename']}</span>
					</p>
					<p>
						<label>分类学地位：</label><span class="va">{$infection['taxonomy']}</span>
					</p>
					<br>
					<p>
						<label>传染源：</label><span class="va">{$infection['infection_source']}</span>
					</p>
					<p>
						<label>传染途径：</label><span class="va">{$infection['infection_path']}</span>
					</p>
					<p>
						<label>易感人群：</label><span class="va">{$infection['suseptible_pop']}</span>
					</p>
				</div>
			</div>
			<div class="b">
				<div class="t">
					诊断标准 <a target="_blank" href="/infection/update.php?id={$infection['id']}#standard" class="edit">编辑</a>
				</div>
				<div class="c">
				{$infection['judge_standard']}
				</div>
			</div>

			<div class="b">
				<div class="t">
					预防措施 <a target="_blank" href="/infection/update.php?id={$infection['id']}#prevention" class="edit">编辑</a>
				</div>
				<div class="c">
				{$infection['prevention']}
				</div>
			</div>

			<div class="b">
				<div class="t">
					治疗措施 <a target="_blank" href="/infection/update.php?id={$infection['id']}#treatment" class="edit">编辑</a>
				</div>
				<div class="c">
					{$infection['treatment']}
				</div>
			</div>
		</div>
	</div>
</div>

{include file="footer.html"}
<script src="http://webapi.amap.com/maps?v=1.3&key=dbb6bc63f724a1f9099ecd0a6acf3871" type="text/javascript"></script>
<script type="text/javascript">
var mapObj;
var markers = [];
$(function(){
	mapInit();
	// map click handler
});
	
//初始化地图对象，加载地图
function mapInit(){
    mapObj = new AMap.Map("mapContainer");

    for(var i=0; i<10; i++){  //伪造数据
    	var marker = new AMap.Marker({                 
	      map:mapObj,                 
	      icon:"/static/img/icon_maker.png",                 
	      offset:new AMap.Pixel(-9,-32),
	      position:new AMap.LngLat(116-i*0.08, 40)   // 构造坐标集合          
	    });
	    markers[i] = marker;
    }

	
	mapObj.plugin(["AMap.MarkerClusterer"],function() {
	    cluster = new AMap.MarkerClusterer(mapObj,markers);
	});

	mapObj.setCenter(new AMap.LngLat(115.6, 40));

}
</script>